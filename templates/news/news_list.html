{% extends "news/base.html" %}

{% block title %}–ù–æ–≤–æ—Å—Ç–∏{% endblock %}

{% block extra_styles %}
    /* ‚îÄ‚îÄ‚îÄ News Grid ‚îÄ‚îÄ‚îÄ */
    .news-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 28px;
        padding-bottom: 80px;
    }

    /* ‚îÄ‚îÄ‚îÄ News Card ‚îÄ‚îÄ‚îÄ */
    .news-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        overflow: hidden;
        transition: border-color var(--transition), transform var(--transition), box-shadow var(--transition);
        cursor: pointer;
        opacity: 0;
        transform: translateY(24px);
        animation: cardReveal 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }

    .news-card:nth-child(1) { animation-delay: 0.05s; }
    .news-card:nth-child(2) { animation-delay: 0.10s; }
    .news-card:nth-child(3) { animation-delay: 0.15s; }
    .news-card:nth-child(4) { animation-delay: 0.20s; }
    .news-card:nth-child(5) { animation-delay: 0.25s; }
    .news-card:nth-child(6) { animation-delay: 0.30s; }
    .news-card:nth-child(7) { animation-delay: 0.35s; }
    .news-card:nth-child(8) { animation-delay: 0.40s; }
    .news-card:nth-child(9) { animation-delay: 0.45s; }

    @keyframes cardReveal {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .news-card:hover {
        border-color: var(--accent);
        transform: translateY(-3px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08), 0 0 0 1px var(--accent-dim);
    }

    .news-card__image {
        width: 100%;
        height: 200px;
        object-fit: cover;
        display: block;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .news-card:hover .news-card__image {
        transform: scale(1.04);
    }

    .news-card__image-wrap {
        overflow: hidden;
        height: 200px;
        position: relative;
    }

    .news-card__image-placeholder {
        height: 200px;
        background: linear-gradient(135deg, #eae7e1 0%, #e0ddd7 50%, #eae7e1 100%);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .news-card__image-placeholder svg {
        width: 40px;
        height: 40px;
        opacity: 0.35;
        color: var(--text-muted);
    }

    .news-card__body {
        padding: 24px;
    }

    .news-card__date {
        font-size: 11px;
        font-weight: 500;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: var(--accent);
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .news-card__date::before {
        content: '';
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--accent);
    }

    .news-card__title {
        font-family: var(--font-display);
        font-size: 20px;
        font-weight: 700;
        line-height: 1.35;
        color: var(--text-primary);
        margin-bottom: 10px;
        transition: color var(--transition);
    }

    .news-card:hover .news-card__title {
        color: var(--accent);
    }

    .news-card__excerpt {
        font-size: 13px;
        color: var(--text-secondary);
        line-height: 1.7;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .news-card__link {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        margin-top: 16px;
        font-size: 11px;
        font-weight: 500;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: var(--text-muted);
        transition: color var(--transition), gap var(--transition);
    }

    .news-card:hover .news-card__link {
        color: var(--accent);
        gap: 10px;
    }

    /* ‚îÄ‚îÄ‚îÄ Empty State ‚îÄ‚îÄ‚îÄ */
    .empty-state {
        text-align: center;
        padding: 100px 24px;
    }

    .empty-state__icon {
        font-size: 48px;
        opacity: 0.2;
        margin-bottom: 24px;
    }

    .empty-state__title {
        font-family: var(--font-display);
        font-size: 24px;
        color: var(--text-secondary);
        margin-bottom: 8px;
    }

    .empty-state__text {
        font-size: 14px;
        color: var(--text-muted);
    }

    /* ‚îÄ‚îÄ‚îÄ Featured first card (full-width) ‚îÄ‚îÄ‚îÄ */
    .news-grid .news-card:first-child {
        grid-column: 1 / -1;
        display: grid;
        grid-template-columns: 1.2fr 1fr;
    }

    .news-grid .news-card:first-child .news-card__image-wrap,
    .news-grid .news-card:first-child .news-card__image-placeholder {
        height: 100%;
        min-height: 280px;
    }

    .news-grid .news-card:first-child .news-card__image {
        height: 100%;
        min-height: 280px;
    }

    .news-grid .news-card:first-child .news-card__title {
        font-size: 28px;
    }

    .news-grid .news-card:first-child .news-card__excerpt {
        -webkit-line-clamp: 4;
    }

    @media (max-width: 700px) {
        .news-grid .news-card:first-child {
            grid-column: auto;
            grid-template-columns: 1fr;
        }
        .news-grid .news-card:first-child .news-card__image-wrap,
        .news-grid .news-card:first-child .news-card__image-placeholder {
            height: 200px;
            min-height: unset;
        }
        .news-grid .news-card:first-child .news-card__image {
            height: 200px;
            min-height: unset;
        }
        nav { padding: 0 20px; }
        .container { padding: 0 16px; }
        .page-header { padding: 48px 0 36px; }
    }
{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <div class="page-header__label">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ—Ä—Ç–∞–ª</div>
        <h1 class="page-header__title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ<br><em>–Ω–æ–≤–æ—Å—Ç–∏</em></h1>
        <p class="page-header__subtitle">–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.</p>
    </div>

    {% if news_list %}
    <div class="news-grid">
        {% for item in news_list %}
        <a href="{% url 'news:news_detail' item.pk %}" class="news-card">
            <div class="news-card__image-wrap">
                {% if item.photo %}
                    <img src="{{ item.photo.url }}" alt="{{ item.title }}" class="news-card__image">
                {% else %}
                    <div class="news-card__image-placeholder">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <path d="M21 15l-5-5L5 21"/>
                        </svg>
                    </div>
                {% endif %}
            </div>
            <div class="news-card__body">
                <div class="news-card__date">{{ item.pub_date|date:"d M Y" }}</div>
                <h2 class="news-card__title">{{ item.title }}</h2>
                <p class="news-card__excerpt">{{ item.short_description }}</p>
                <span class="news-card__link">–ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚Üí</span>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-state__icon">üì∞</div>
        <h2 class="empty-state__title">–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</h2>
        <p class="empty-state__text">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –Ω–æ–≤–æ—Å—Ç—å —á–µ—Ä–µ–∑ <a href="/admin/" style="color: var(--accent);">admin</a></p>
    </div>
    {% endif %}
</div>
{% endblock %}
